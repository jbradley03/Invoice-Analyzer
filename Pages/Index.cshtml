@page
@model IndexModel
@{
    ViewData["Title"] = "Invoice Analyzer";
}

<div
    style="padding: 2rem; font-family: system-ui, sans-serif; height: 100vh; box-sizing: border-box; display:flex; flex-direction:column;">
    <h2 style="margin:0 0 12px;">Invoice Analyzer</h2>

    <div style="display:flex;  align-items:center; margin-bottom:25px; margin-right:1rem;">
        <input type="file" id="fileInput" accept=".pdf,image/*" />
<div style="margin-left:auto; display:flex; gap:.5rem; align-items:center;">
    <button id="uploadBtn" style="border:1px solid #111; padding:.5rem .75rem; border-radius:4px;">Upload & Analyze</button>
    <button id="openPdfBtn" style="border:1px solid #111; padding:.5rem .75rem; border-radius:4px;">Open PDF</button>
    <button id="clearBtn" style="border:1px solid #111; padding:.5rem .75rem; border-radius:4px;">Clear</button>
    <div id="errorBox" style="margin-left:1rem; color:#b91c1c;"></div>
</div>

    </div>

    <div style="display:grid; grid-template-columns: 1fr 1fr; gap: 8px; flex:1; min-height:100vh;width:100%;">


        <!-- PDF Preview -->
        <div
            style="border:1px solid #ddd; border-radius:8px; background:#fff; display:flex; flex-direction:column; height:80vh;width: 45vw">
            <div style="padding:.6rem .8rem; border-bottom:1px solid #eee; background:#fafafa; font-weight:600;">PDF
                Preview</div>
            <div style="flex:1; min-height:0;">
                <iframe id="pdfViewer" style="width:100%; height:100%; border:0;"></iframe>
            </div>
        </div>
        <!-- Extracted Fields -->
        <div
            style="border:1px solid #ddd; border-radius:8px; background:#fff; display:flex; flex-direction:column; height:80vh;width: 45vw">
            <div style="padding:.6rem .8rem; border-bottom:1px solid #eee; background:#fafafa; font-weight:600;">
                Extracted Fields</div>
            <div style="padding:.6rem .8rem; overflow:auto; min-height:0;">
                <table id="resultsTable" style="width:100%; border-collapse:collapse; font-size:.95rem;">
                    <thead>
                        <tr>
                            <th
                                style="text-align:left; padding:.6rem; border-bottom:2px solid #e5e7eb; background:#f9fafb; position:sticky; top:0;">
                                Field</th>
                            <th
                                style="text-align:left; padding:.6rem; border-bottom:2px solid #e5e7eb; background:#f9fafb; position:sticky; top:0;">
                                Value</th>
                        </tr>
                    </thead>
                    <tbody></tbody>
                </table>
            </div>
        </div>


    </div>
</div>

@section Scripts {
    <script src="~/js/invoice.js"></script>
}
